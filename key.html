<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đi Lấy Key</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
            background-color: #f8f9fa;
            color: #333;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 1px 4px 10px rgba(1, 0, 0, 0.1);
            display: inline-block;
            max-width: 400px;
            width: 80%;
        }
        h2 {
            margin-bottom: 20px;
        }
        .key-container {
            background-color: pink;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 18px;
            font-weight: bold;
            display: none;
        }
        .countdown {
            margin-top: 25px;
            font-size: 18px;
            font-weight: bold;
            color: dark;
            display: none;
        }
        .loading {
            font-size: 20px;
            font-weight: bold;
            color: pink;
            margin-top: 20px;
            display: none;
        }
        .button {
            display: inline-block;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: bold;
            color: dark;
            background-color: pink;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 0px;
        }
        .button:hover {
            background-color: #0056b3;
        }
footer {
    margin-top: 450px;
    font-size: 14px;
    color: #666;
}
    </style>
</head>
<body>

    <div class="container">
        <h2>Key UgPhone</h2>

        <div class="loading" id="loadingText">Check Key...</div>

        <div class="key-container" id="keyContainer">
            <span id="keyDisplay">...</span>
        </div>

        <div class="countdown" id="countdownText"></div>

        <button class="button" id="getKeyButton"><div id="title"></div>
</button>
    </div>


<script>
async function fetchTitle() {
    try {
        const response = await fetch("https://turbolite.xyz/key");
        const text = await response.text();
        const parser = new DOMParser();
        const doc = parser.parseFromString(text, "text/html");
        const title = doc.querySelector("title").innerText;
        
        document.getElementById("title").textContent = title;
    } catch (error) {
        console.error("Lỗi khi lấy tiêu đề:", error);
    }
}

fetchTitle();
</script>

    <script>
        const keyStorageName = "user_key";
        const timeStorageName = "key_time";
        const indexStorageName = "key_index";
        const gotKeyStorageName = "got_key"; // Lưu trạng thái đã lấy key chưa
        const expirationTime = 30 * 60 * 60 * 1000; // 25 giờ

        const keysList = [
            "KEY_ABC123", "KEY_DEF456", "KEY_GHI789", "KEY_JKL012",
            "KEY_MNO345", "KEY_PQR678", "KEY_STU901", "KEY_VWX234",
            "KEY_YZA567", "KEY_BCD890"
        ];
        const redirectURL = "https://www.turbolite.asia/2024/05/ugphone-x-ultra-android-va-ios.html"; // Link chuyển hướng

        function getCurrentKey() {
            let savedTime = localStorage.getItem(timeStorageName);
            let savedIndex = localStorage.getItem(indexStorageName);
            let currentTime = new Date().getTime();

            if (!savedTime || !savedIndex || currentTime - savedTime >= expirationTime) {
                let newIndex = (savedIndex === null) ? 0 : (parseInt(savedIndex) + 1) % keysList.length;
                localStorage.setItem(indexStorageName, newIndex);
                localStorage.setItem(timeStorageName, currentTime);
                localStorage.setItem(keyStorageName, keysList[newIndex]);
            }
            return localStorage.getItem(keyStorageName);
        }

        function updateCountdown() {
            let savedTime = localStorage.getItem(timeStorageName);
            if (!savedTime) return;

            let currentTime = new Date().getTime();
            let remainingTime = expirationTime - (currentTime - savedTime);

            if (remainingTime <= 0) {
                localStorage.removeItem(timeStorageName);
                localStorage.removeItem(keyStorageName);
                localStorage.removeItem(gotKeyStorageName);
                document.getElementById("countdownText").style.display = "none";
                document.getElementById("getKeyButton").style.display = "block"; // Hiện nút lại khi key hết hạn
                return;
            }

            let hours = Math.floor(remainingTime / (1000 * 60 * 60));
            let minutes = Math.floor((remainingTime % (1000 * 60 * 60)) / (1000 * 60));
            let seconds = Math.floor((remainingTime % (1000 * 60)) / 1000);

            document.getElementById("countdownText").innerText = `${hours}h : ${minutes} : ${seconds} `;
            document.getElementById("countdownText").style.display = "block";
        }

        function startCountdown() {
            updateCountdown();
            setInterval(updateCountdown, 5000);
        }

        function showKey() {
            let key = getCurrentKey();
            document.getElementById("loadingText").style.display = "block";
            document.getElementById("getKeyButton").style.display = "none"; // Ẩn nút khi đang tải key

            setTimeout(() => {
                document.getElementById("loadingText").style.display = "none";
                document.getElementById("keyDisplay").innerText = key;
                document.getElementById("keyContainer").style.display = "block";
                localStorage.setItem(gotKeyStorageName, "true"); // Đánh dấu đã lấy key
                startCountdown(); // Bắt đầu đếm ngược
            }, 5000);
        }

        function handleGetKeyButtonClick() {
            let gotKey = localStorage.getItem(gotKeyStorageName);

            if (gotKey) {
                showKey();
            } else {
                window.open(redirectURL, "_blank");
                showKey();
            }
        }

        document.getElementById("getKeyButton").addEventListener("click", handleGetKeyButtonClick);

        // Nếu đã có key từ trước, ẩn nút và hiển thị key luôn
        if (localStorage.getItem(keyStorageName)) {
            document.getElementById("keyDisplay").innerText = localStorage.getItem(keyStorageName);
            document.getElementById("keyContainer").style.display = "block";
            document.getElementById("getKeyButton").style.display = "none"; // Ẩn nút khi đã có key
            startCountdown(); // Bắt đầu đếm ngược
        }
    </script>

</body>
</html>
<footer>
    <p>© Powered by Turbo Lite </p>
</footer>